<div style="display: flex;
flex-direction: column;
align-items: center;
">
    <mat-card style="width:calc(100% - 60px); " MatCardAppearance='raised'>
        <mat-card-content>
            <div class="container-border">
                <h4>{{isNew?'Nuevo Syllabus':'Editar Syllabus'}}</h4>
                <mat-card
                    style="width:calc(100% - 60px); border: 1px #666666 solid; border-radius: 15px;background-color: #F5F5F5; margin: auto;">
                    <mat-card-content>
                        <p>
                            <label for=""><strong>Proyecto / Programa curricular:</strong> {{Proyecto.Nombre}}
                            </label>

                        </p>
                        <p>
                            <label for=""><strong>Plan de estudios:</strong> {{PlanEstudio.cra_nombre}}, plan de
                                estudio:{{PlanEstudio.pen_nro}}</label>
                        </p>
                        <p>
                            <label for=""><strong>Periodo académico:</strong> {{EspacioAcademico.pen_sem}}
                            </label>
                        </p>
                    </mat-card-content>
                </mat-card>
                <mat-card>
                    <mat-card-content>
                        <mat-accordion [multi]="true">
                            <!-- Identificacion del espacio Academico -->
                            <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        Identificación del espacio académico
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <div class="container-border">
                                    <h4> Identificación del espacio académico </h4>

                                    <mat-accordion [multi]="true">
                                        <mat-expansion-panel [expanded]="true" hideToggle>
                                            <mat-expansion-panel-header>
                                                <mat-panel-title>
                                                    Nombre del espacio académico
                                                </mat-panel-title>
                                            </mat-expansion-panel-header>
                                            <table class="mat-table" style="margin-top: 10px;">
                                                <tr class="mat-row">
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;text-align: center;">
                                                        Código del espacio académico</td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">
                                                        {{detalle_espacio_academico?.asi_cod}}
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;text-align: center;">
                                                        Número de creditos académicos</td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">
                                                        {{detalle_espacio_academico?.pen_cre}}
                                                    </td>
                                                </tr>
                                            </table>
                                            <table class="mat-table" style="margin-top: 10px;">
                                                <tr class="mat-row">
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;text-align: center;">
                                                        Distribución horas de trabajo</td>
                                                    <td class="mat-cell"
                                                        style="background-color: #d1d1d1; padding: 0px;text-align: center;vertical-align: middle;">
                                                        HTD
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">
                                                        {{detalle_espacio_academico?.pen_nro_ht}}
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: #d1d1d1;padding: 0px;text-align: center;vertical-align: middle;">
                                                        HTC
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">
                                                        {{detalle_espacio_academico?.pen_nro_hp}}
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: #d1d1d1;padding: 0px;text-align: center;vertical-align: middle;">
                                                        HTA
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">
                                                        {{detalle_espacio_academico?.pen_nro_aut}}
                                                    </td>
                                                </tr>
                                                <tr class="mat-row">
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;text-align: center;">
                                                        Tipo de espacio académico</td>
                                                    <td class="mat-cell"
                                                        style="background-color: #d1d1d1; padding: 0px;text-align: center;vertical-align: middle;">
                                                        Asignatura
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle; background-color: white;">
                                                        {{detalle_espacio_academico?.tipo=='ASIGNATURA'?'X':''}}
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: #d1d1d1;padding: 0px;text-align: center;vertical-align: middle;">
                                                        Catedra
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;background-color: white;">
                                                        {{detalle_espacio_academico?.tipo=='CATEDRA'?'X':''}}
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;background-color: white;">

                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;background-color: white;">

                                                    </td>
                                                </tr>
                                            </table>
                                        </mat-expansion-panel>
                                        <mat-expansion-panel [expanded]="true" hideToggle>
                                            <mat-expansion-panel-header>
                                                <mat-panel-title>
                                                    Naturaleza del espacio académico
                                                </mat-panel-title>
                                            </mat-expansion-panel-header>
                                            <table class="mat-table" style="margin-top: 10px;">
                                                <tr class="mat-row">
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;text-align: center;">
                                                        Obligatorio básico</td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">
                                                        {{detalle_espacio_academico?.cea_abr=="OB"?'X':''}}
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;padding: 0px;text-align: center;vertical-align: middle;">
                                                        Obligatorio complementario
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">
                                                        {{detalle_espacio_academico?.cea_abr=="OC"?'X':''}}
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;padding: 0px;text-align: center;vertical-align: middle;">
                                                        Electivo intrínseco
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">
                                                        {{detalle_espacio_academico?.cea_abr=="EI"?'X':''}}
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;padding: 0px;text-align: center;vertical-align: middle;">
                                                        Electivo extrínseco
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">
                                                        {{detalle_espacio_academico?.cea_abr=="EE"?'X':''}}
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;padding: 0px;text-align: center;vertical-align: middle;">
                                                        Electivo
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">
                                                        {{detalle_espacio_academico?.cea_abr=="E"?'X':''}}
                                                    </td>
                                                </tr>
                                            </table>
                                        </mat-expansion-panel>
                                        <mat-expansion-panel [expanded]="true" hideToggle>
                                            <mat-expansion-panel-header>
                                                <mat-panel-title>
                                                    Carácter del espacio académico
                                                </mat-panel-title>
                                            </mat-expansion-panel-header>
                                            <table class="mat-table" style="margin-top: 10px;">
                                                <tr class="mat-row">
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;text-align: center;">
                                                        Teórico</td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">

                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;padding: 0px;text-align: center;vertical-align: middle;">
                                                        Práctico
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">

                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;padding: 0px;text-align: center;vertical-align: middle;">
                                                        Teórico / Practico
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">

                                                    </td>
                                                </tr>
                                            </table>
                                        </mat-expansion-panel>
                                        <mat-expansion-panel [expanded]="true" hideToggle>
                                            <mat-expansion-panel-header>
                                                <mat-panel-title>
                                                    Modalidad de oferta del espacio académico
                                                </mat-panel-title>
                                            </mat-expansion-panel-header>

                                            <table class="mat-table" style="margin-top: 10px;">
                                                <tr class="mat-row">
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;text-align: center;">
                                                        Presencial</td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">

                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;padding: 0px;text-align: center;vertical-align: middle;">
                                                        Presencial con incorporación de TIC
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">

                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;padding: 0px;text-align: center;vertical-align: middle;">
                                                        Virtual
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">

                                                    </td>
                                                    <td class="mat-cell"
                                                        style="background-color: var(--primary);color: white;padding: 0px;text-align: center;vertical-align: middle;">
                                                        Otros
                                                    </td>
                                                    <td class="mat-cell"
                                                        style="padding: 0px;text-align: center;vertical-align: middle;">

                                                    </td>
                                                </tr>
                                            </table>
                                        </mat-expansion-panel>
                                        <mat-expansion-panel [expanded]="true" hideToggle>
                                            <mat-expansion-panel-header>
                                                <mat-panel-title>
                                                    Idiomas en que se oferta el espacio académico
                                                </mat-panel-title>
                                            </mat-expansion-panel-header>
                                            <form [formGroup]="formIdiomas">
                                                <mat-form-field appearance="fill" [style.width.%]="100">
                                                    <mat-label>Seleccione los idiomas</mat-label>
                                                    <mat-select (selectionChange)="onChangeIdioma($event.value)"
                                                        formControlName="idioma_espacio_id" multiple>
                                                        <input (keyup)="onKeySearchIdioma($event.target.value)"
                                                            class="input-search"
                                                            placeholder="Escriba el nombre del idioma que desea seleccionar">
                                                        <mat-option *ngFor="let idioma of filteredIdiomas"
                                                            [value]="idioma.Id">
                                                            {{idioma.Nombre}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </form>
                                        </mat-expansion-panel>
                                    </mat-accordion>

                                    <mat-action-row style="height: 100%; width: 100%; display: flex;
                                    flex-direction: column;
                                    justify-content: flex-start;
                                    align-items: center;">
                                        <button mat-button style="background-color: #03678F;color: white;"
                                            (click)="nextStep()" [disabled]="formIdiomas.invalid">Continuar</button>
                                    </mat-action-row>
                                </div>

                            </mat-expansion-panel>
                            <!-- Secuencia didactica -->
                            <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        Definición y desarrollo del espacio académico
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <div class="container-border">
                                    <h4> Definición y desarrollo del espacio académico </h4>
                                    <div style="height: 100%; width: 100%; display: flex;
                                        flex-direction: column;
                                        justify-content: flex-start;
                                        align-items: center;">
                                        <mat-card
                                            style="max-width: 75%;background-color: #FFFF66; border-radius: 15px; margin: 10px;"
                                            MatCardAppearance='outlined'>
                                            <mat-card-content>
                                                <p style="margin: 0%;text-align: justify;text-align-last: center;">
                                                    Usuario, por favor diligencie la siguiente información, para avanzar
                                                    en las secciones debe dar clic en guardar y despues en el boton
                                                    siguiente
                                                </p>
                                            </mat-card-content>

                                        </mat-card>
                                    </div>
                                    <!-- [linear]="isNew" -->
                                    <mat-stepper orientation="vertical" [linear]="isNew">
                                        <mat-step [stepControl]="formSaberesPrevios">
                                            <form [formGroup]="formSaberesPrevios">
                                                <ng-template matStepLabel>Sugerencias de saberes y conocimientos
                                                    previos</ng-template>
                                                <ng-template matStepContent>
                                                    <mat-form-field style="width: 100%">
                                                        <mat-label></mat-label>
                                                        <textarea matInput formControlName='saberesPrevios'></textarea>
                                                    </mat-form-field>
                                                    <div>
                                                        <button mat-button matStepperNext mat-raised-button
                                                            style="background-color: var(--primary);color: white;">Siguiente</button>
                                                    </div>
                                                </ng-template>
                                            </form>
                                        </mat-step>
                                        <mat-step [stepControl]="formJustificacion">
                                            <form [formGroup]="formJustificacion">
                                                <ng-template matStepLabel>Justificación del espacio
                                                    académico</ng-template>
                                                <ng-template matStepContent>

                                                    <mat-form-field style="width: 100%">
                                                        <mat-label></mat-label>
                                                        <textarea matInput formControlName="justificacion"></textarea>
                                                    </mat-form-field>
                                                    <!-- <button mat-button matStepperPrevious>Guardar</button> -->
                                                    <button mat-button matStepperPrevious mat-raised-button
                                                        style="background-color: var(--primary);color: white;">Anterior</button>
                                                    <button mat-button matStepperNext mat-raised-button
                                                        style="background-color: var(--primary);color: white; margin-left: 10px;">Siguiente</button>
                                                </ng-template>
                                            </form>
                                        </mat-step>
                                        <mat-step [stepControl]="formObjetivos">
                                            <form [formGroup]="formObjetivos">
                                                <ng-template matStepLabel>Objetivos del espacio académico (general y
                                                    específicos)</ng-template>
                                                <ng-template matStepContent>

                                                    <mat-form-field style="width: 100%">
                                                        <mat-label for="objetivoGeneral">Objetivo General</mat-label>
                                                        <textarea id="objetivoGeneral" matInput
                                                            formControlName="objetivoGeneral"></textarea>
                                                    </mat-form-field>
                                                    <div style="display: flex;">
                                                        <h2>Objetivos específicos</h2>
                                                        <mat-icon matTooltip="Agregar objetivo específico"
                                                            (click)="agregarObjetivoEspecifico()" fontIcon="add" style="color: white;
                                                            background-color: var(--primary);
                                                            border-radius: 32px;
                                                            margin-left: auto;"></mat-icon>
                                                    </div>
                                                    <div formArrayName="objetivosEspecificos">
                                                        <ng-container
                                                            *ngFor="let ObjEsp of objetivosEspecificos.controls;let i=index">
                                                            <div [formGroupName]="i">
                                                                <mat-form-field style="width: 100%">
                                                                    <mat-label for="ObjEsp-{{i}}">Objetivo Especifico
                                                                        {{i+1}}</mat-label>
                                                                    <textarea id="ObjEsp-{{i}}" matInput
                                                                        formControlName="objetivo"></textarea>
                                                                    <mat-icon matTooltip="Eliminar objetivo específico"
                                                                        fontIcon="delete" style="color: white;
                                                                        background-color: var(--primary);
                                                                        border-radius: 32px;
                                                                        height: 25px;
                                                                        width: 25px;
                                                                        padding: 0px;" *ngIf="i!=0" matSuffix
                                                                        (click)="eliminarObjetivoEspecifico(i)"></mat-icon>
                                                                </mat-form-field>
                                                            </div>
                                                        </ng-container>
                                                    </div>
                                                    <!-- <button mat-button matStepperPrevious>Guardar</button> -->
                                                    <button mat-button matStepperPrevious mat-raised-button
                                                        style="background-color: var(--primary);color: white;">Anterior</button>
                                                    <button mat-button matStepperNext mat-raised-button
                                                        style="background-color: var(--primary);color: white; margin-left: 10px;">Siguiente</button>
                                                </ng-template>
                                            </form>
                                        </mat-step>
                                        <mat-step [stepControl]="formPFA">
                                            <form [formGroup]="formPFA">
                                                <ng-template matStepLabel>Propositos de formación y de aprendizaje (PFA)
                                                    del
                                                    espacio académico</ng-template>
                                                <ng-template matStepContent>
                                                    <table mat-table style="border: 1px var(--primary) solid;"
                                                        [dataSource]="dataSourceFormPFA" formArrayName="pfa">
                                                        <!-- Row definitions -->
                                                        <tr mat-header-row *matHeaderRowDef="displayedColumnsFormPFA">
                                                        </tr>
                                                        <tr mat-row
                                                            *matRowDef="let row; let i = index; columns: displayedColumnsFormPFA;">
                                                        </tr>
                                                        <!-- Column definitions -->
                                                        <ng-container matColumnDef="numero">
                                                            <th mat-header-cell *matHeaderCellDef
                                                                style="text-align: center;"> <mat-icon
                                                                    matTooltip="Agregar fila"
                                                                    (click)="agregarPFA(undefined,false);"
                                                                    fontIcon="add" style="color: white;
                                                                background-color: var(--primary);
                                                                border-radius: 32px;
                                                                margin-left: auto;"></mat-icon> </th>
                                                            <td mat-cell *matCellDef="let row; let index = index"
                                                                style="text-align: center;padding: 0px !important;width: 1vw;">
                                                                {{index+1}}

                                                                <mat-icon matTooltip="Eliminar fila" fontIcon="delete"
                                                                    style="color: white;
                                                                        background-color: var(--primary);
                                                                        border-radius: 32px;
                                                                        height: 25px;
                                                                        width: 25px;
                                                                        padding: 0px;" *ngIf="index!=0" matSuffix
                                                                    (click)="eliminarPFA(index)">
                                                                </mat-icon>

                                                            </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="pfaPrograma">
                                                            <th mat-header-cell *matHeaderCellDef
                                                                style="text-align: center;"> PFA del programa /
                                                                proyecto </th>
                                                            <td mat-cell *matCellDef="let row; let index = index"
                                                                [formGroupName]="index"
                                                                style="padding: 5px 10px 0px 0px !important;text-align: center;vertical-align: middle;">
                                                                <mat-form-field style="width: 100%;">
                                                                    <mat-label>PFA programa</mat-label>
                                                                    <input matInput formControlName="pfa_programa">
                                                                </mat-form-field>
                                                            </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="pfaAsignatura">
                                                            <th mat-header-cell *matHeaderCellDef
                                                                style="text-align: center;"> PFA de la asignatura
                                                            </th>
                                                            <td mat-cell *matCellDef="let row; let index = index"
                                                                [formGroupName]="index"
                                                                style="padding: 5px 10px 0px 0px !important;text-align: center;vertical-align: middle;">
                                                                <mat-form-field style="width: 100%;">
                                                                    <mat-label>PFA asignatura</mat-label>
                                                                    <input matInput formControlName="pfa_asignatura">
                                                                </mat-form-field>
                                                            </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="competencias">
                                                            <th mat-header-cell *matHeaderCellDef
                                                                style="text-align: center;">
                                                                Competencias
                                                            </th>
                                                            <td mat-cell *matCellDef="let row; let index = index"
                                                                [formGroupName]="index"
                                                                style="padding: 5px 10px 0px 0px !important;text-align: center;vertical-align: middle;">
                                                                <mat-form-field style="width: 100%;">
                                                                    <mat-label>competencias</mat-label>
                                                                    <input matInput formControlName="competencias">
                                                                </mat-form-field>
                                                            </td>
                                                        </ng-container>
                                                    </table>
                                                    <button mat-button matStepperPrevious style="margin-top: 0px;"
                                                        mat-raised-button
                                                        style="background-color: var(--primary);color: white;">Anterior</button>
                                                    <button mat-button matStepperNext mat-raised-button
                                                        style="background-color: var(--primary);color: white; margin-left: 10px; margin-top: 14px;">Siguiente</button>
                                                </ng-template>
                                            </form>
                                        </mat-step>
                                        <mat-step [stepControl]="formContenidosTematicos">
                                            <form [formGroup]="formContenidosTematicos">
                                                <ng-template matStepLabel>Contenidos temáticos</ng-template>
                                                <ng-template matStepContent>

                                                    <mat-form-field style="width: 100%">
                                                        <mat-label>Descripcion</mat-label>
                                                        <textarea matInput formControlName="descripcion"></textarea>
                                                    </mat-form-field>
                                                    <ng-container formArrayName="temas">

                                                        <div style="display: flex;">
                                                            <h2>Temas</h2>
                                                            <mat-icon matTooltip="Agregar tema" (click)="agregarTema();"
                                                                fontIcon="add" style="color: white;
                                                                background-color: var(--primary);
                                                                border-radius: 32px;
                                                                margin-left: auto;"></mat-icon>
                                                        </div>
                                                        <ng-container *ngFor="let tema of temas.controls;let i=index">
                                                            <div [formGroupName]="i">
                                                                <div style="display: flex;">
                                                                    <h3>Temas {{i+1}}</h3>
                                                                </div>
                                                                <mat-form-field style="width: 100%">
                                                                    <mat-label for="tema-Nombre-{{i}}">Tema
                                                                        {{i+1}}</mat-label>
                                                                    <input type="text" id="tema-Nombre-{{i}}" matInput
                                                                        formControlName="nombre">
                                                                    <mat-icon matTooltip="Eliminar tema"
                                                                        fontIcon="delete" style="color: white;
                                                                            background-color: var(--primary);
                                                                            border-radius: 32px;
                                                                            height: 25px;
                                                                            width: 25px;
                                                                            padding: 0px;" *ngIf="i!=0" matSuffix
                                                                        (click)="eliminarTema(i)">
                                                                    </mat-icon>
                                                                </mat-form-field>
                                                                <div style="display: flex;">
                                                                    <h5>Subtemas {{tema.get('nombre').value}}</h5>
                                                                    <mat-icon matTooltip="Agregar sub tema"
                                                                        (click)="agregarSubTema(i);" fontIcon="add"
                                                                        style="color: white;
                                                                    background-color: var(--primary);
                                                                    border-radius: 32px;
                                                                    margin-left: auto;"></mat-icon>
                                                                </div>
                                                                <ng-container formArrayName="subtemas">
                                                                    <ng-container
                                                                        *ngFor="let subtema of subtemas(i).controls;let j=index">
                                                                        <div>
                                                                            <mat-form-field style="width: 100%">
                                                                                <mat-label
                                                                                    for="subtema-{{i+1}}-{{j+1}}">SubTema
                                                                                    {{i+1}} - {{j+1}}</mat-label>
                                                                                <input type="text"
                                                                                    id="subtema-{{i+1}}-{{j+1}}"
                                                                                    matInput [formControlName]="j">

                                                                                <mat-icon matTooltip="Eliminar subtema"
                                                                                    fontIcon="delete" style="color: white;
                                                                                        background-color: var(--primary);
                                                                                        border-radius: 32px;
                                                                                        height: 25px;
                                                                                        width: 25px;
                                                                                        padding: 0px;" *ngIf="j!=0"
                                                                                    matSuffix
                                                                                    (click)="eliminarSubTema(i,j)">
                                                                                </mat-icon>

                                                                            </mat-form-field>
                                                                        </div>
                                                                    </ng-container>
                                                                </ng-container>
                                                                <mat-divider
                                                                    style="background: var(--primary);"></mat-divider>
                                                            </div>
                                                        </ng-container>

                                                    </ng-container>

                                                    <!-- <button mat-button matStepperPrevious>Guardar</button> -->
                                                    <button mat-button matStepperPrevious mat-raised-button
                                                        style="background-color: var(--primary);color: white;">Anterior</button>
                                                    <button mat-button matStepperNext mat-raised-button
                                                        style="background-color: var(--primary);color: white; margin-left: 10px;">Siguiente</button>
                                                </ng-template>
                                            </form>
                                        </mat-step>
                                        <mat-step [stepControl]="formEstrategias">
                                            <form [formGroup]="formEstrategias">
                                                <ng-template matStepLabel>Estrategias de enseñanza que favorecen el
                                                    aprendizaje</ng-template>
                                                <ng-template matStepContent>

                                                    <ng-container formArrayName="estrategias">
                                                        <ng-container
                                                            *ngFor="let estrategia of estrategias.controls;let i=index">
                                                            <div style="width: 100%" [formGroupName]="i">
                                                                <div style="display: flex;">
                                                                    <h3>Estrategia {{i+1}}</h3>
                                                                    <mat-icon matTooltip="Agregar estrategia"
                                                                        (click)="agregarEstrategia();" fontIcon="add"
                                                                        style="color: white;
                                                                    background-color: var(--primary);
                                                                    border-radius: 32px;
                                                                    margin-left: auto;" *ngIf="i==0"></mat-icon>
                                                                    <mat-icon matTooltip="Eliminar estrategia"
                                                                        fontIcon="delete" style="color: white;
                                                                        background-color: var(--primary);
                                                                        border-radius: 32px;
                                                                        height: 25px;
                                                                        width: 25px;
                                                                        padding: 0px;
                                                                        margin-left: auto;" *ngIf="i!=0" matSuffix
                                                                        (click)="eliminarEstrategia(i)">
                                                                    </mat-icon>
                                                                </div>
                                                                <div style="display:flex;width: 100%;
                                                                gap: 5px;">
                                                                    <mat-form-field style="width: 25%;">
                                                                        <mat-label
                                                                            for="estra-nombre-{{i}}">Nombre</mat-label>
                                                                        <textarea id="estra-nombre-{{i}}" matInput
                                                                            formControlName="nombre"></textarea>
                                                                    </mat-form-field>
                                                                    <mat-form-field style="width: 25%;">
                                                                        <mat-label
                                                                            for="estra-desc-{{i}}">Descripcion</mat-label>
                                                                        <textarea id="estra-desc-{{i}}" matInput
                                                                            formControlName="descripcion"></textarea>
                                                                    </mat-form-field>
                                                                    <mat-form-field style="width: 25%;">
                                                                        <mat-label
                                                                            for="estra-pertinecia-{{i}}">Pertinencia</mat-label>
                                                                        <textarea id="estra-pertinecia-{{i}}" matInput
                                                                            formControlName="pertinencia"></textarea>
                                                                    </mat-form-field>
                                                                    <mat-form-field style="width: 25%;">
                                                                        <mat-label
                                                                            for="estra-arti-{{i}}">Articulacion</mat-label>
                                                                        <textarea id="estra-arti-{{i}}" matInput
                                                                            formControlName="articulacion_ra"></textarea>
                                                                    </mat-form-field>



                                                                </div>
                                                                <mat-divider
                                                                    style="background: var(--primary);"></mat-divider>
                                                            </div>
                                                        </ng-container>

                                                    </ng-container>

                                                    <!-- <button mat-button matStepperPrevious>Guardar</button> -->
                                                    <button mat-button matStepperPrevious mat-raised-button
                                                        style="background-color: var(--primary);color: white;">Anterior</button>
                                                    <button mat-button matStepperNext mat-raised-button
                                                        style="background-color: var(--primary);color: white; margin-left: 10px;">Siguiente</button>
                                                </ng-template>
                                            </form>
                                        </mat-step>
                                        <mat-step [stepControl]="formEvaluacion">
                                            <form [formGroup]="formEvaluacion">
                                                <ng-template matStepLabel>Evaluación</ng-template>
                                                <ng-template matStepContent>

                                                    <mat-form-field style="width: 100%">
                                                        <mat-label>Descripcion</mat-label>
                                                        <textarea matInput formControlName="descripcion"></textarea>
                                                    </mat-form-field>
                                                    <ng-container formArrayName="evaluaciones">
                                                        <ng-container
                                                            *ngFor="let evalucion of evaluaciones.controls;let i=index">
                                                            <div style="display: flex;">
                                                                <h3>Evaluación {{i+1}}</h3>
                                                                <mat-icon matTooltip="Agregar evaluación"
                                                                    (click)="agregarEvalucion();" fontIcon="add" style="color: white;
                                                                    background-color: var(--primary);
                                                                    border-radius: 32px;
                                                                    margin-left: auto;" *ngIf="i==0">
                                                                </mat-icon>
                                                                <mat-icon matTooltip="Eliminar evaluación"
                                                                    fontIcon="delete" style="color: white;
                                                                        background-color: var(--primary);
                                                                        border-radius: 32px;
                                                                        height: 25px;
                                                                        width: 25px;
                                                                        padding: 0px;
                                                                        margin-left: auto;" *ngIf="i!=0" matSuffix
                                                                    color="primary" (click)="eliminarEvaluacion(i)">
                                                                </mat-icon>
                                                            </div>
                                                            <div [formGroupName]="i" style="display: flex; gap:5px;">
                                                                <mat-form-field style="width: 25%;">
                                                                    <mat-label>Nombre</mat-label>
                                                                    <input matInput formControlName="nombre">
                                                                </mat-form-field>
                                                                <mat-form-field style="width: 25%;">
                                                                    <mat-label>Estrategia</mat-label>
                                                                    <input matInput formControlName="estrategia">
                                                                </mat-form-field>
                                                                <mat-form-field style="width: 25%;">
                                                                    <mat-label>Momento</mat-label>
                                                                    <input matInput formControlName="momento">
                                                                </mat-form-field>
                                                                <mat-form-field style="width: 25%;">
                                                                    <mat-label>Porcentaje</mat-label>
                                                                    <input matInput type="number"
                                                                        formControlName="porcentaje">
                                                                </mat-form-field>



                                                                <mat-divider
                                                                    style="background: var(--primary);"></mat-divider>
                                                            </div>
                                                        </ng-container>
                                                    </ng-container>

                                                    <!-- <button mat-button matStepperPrevious>Guardar</button> -->
                                                    <button mat-button matStepperPrevious mat-raised-button
                                                        style="background-color: var(--primary);color: white;">Anterior</button>
                                                    <button mat-button matStepperNext mat-raised-button
                                                        style="background-color: var(--primary);color: white; margin-left: 10px;">Siguiente</button>
                                                </ng-template>
                                            </form>
                                        </mat-step>
                                        <mat-step [stepControl]="formMedios">
                                            <form [formGroup]="formMedios">
                                                <ng-template matStepLabel>Medios y recursos educativos</ng-template>
                                                <ng-template matStepContent>

                                                    <mat-form-field style="width: 100%">
                                                        <mat-label>Medios y Recursos educativos</mat-label>
                                                        <textarea matInput formControlName="medios"></textarea>
                                                    </mat-form-field>

                                                    <!-- <button mat-button matStepperPrevious>Guardar</button> -->
                                                    <button mat-button matStepperPrevious mat-raised-button
                                                        style="background-color: var(--primary);color: white;">Anterior</button>
                                                    <button mat-button matStepperNext mat-raised-button
                                                        style="background-color: var(--primary);color: white; margin-left: 10px;">Siguiente</button>
                                                </ng-template>
                                            </form>
                                        </mat-step>
                                        <mat-step [stepControl]="formPracticasAcademicas">
                                            <form [formGroup]="formPracticasAcademicas">
                                                <ng-template matStepLabel>Practicas académicas - salidas de
                                                    campo</ng-template>
                                                <ng-template matStepContent>

                                                    <mat-form-field style="width: 100%">
                                                        <mat-label>Practicas</mat-label>
                                                        <textarea matInput
                                                            formControlName="practicasAcademicas"></textarea>
                                                    </mat-form-field>

                                                    <!-- <button mat-button matStepperPrevious>Guardar</button> -->
                                                    <button mat-button matStepperPrevious mat-raised-button
                                                        style="background-color: var(--primary);color: white;">Anterior</button>
                                                    <button mat-button matStepperNext mat-raised-button
                                                        style="background-color: var(--primary);color: white; margin-left: 10px;">Siguiente</button>
                                                </ng-template>
                                            </form>
                                        </mat-step>
                                        <mat-step [stepControl]="formBibliografia">
                                            <form [formGroup]="formBibliografia">
                                                <ng-template matStepLabel>Bibliografía</ng-template>
                                                <ng-template matStepContent>
                                                    <div>
                                                        <table mat-table style="border: 1px var(--primary) solid;"
                                                            [dataSource]="dataSourceFormBiblioBas"
                                                            formArrayName="basicas">
                                                            <!-- Row definitions -->
                                                            <tr mat-header-row
                                                                *matHeaderRowDef="displayedColumnsBibliografiaBasica">
                                                            </tr>
                                                            <tr mat-row
                                                                *matRowDef="let row; let i = index; columns: displayedColumnsBibliografiaBasica;">
                                                            </tr>
                                                            <!-- Column definitions -->
                                                            <ng-container matColumnDef="basicas">
                                                                <th mat-header-cell *matHeaderCellDef
                                                                    style="text-align: center;">
                                                                    <div style="display: flex;
                                                                    justify-content: center;">
                                                                        <h3 style="position: absolute;">Básicas</h3>
                                                                        <mat-icon matTooltip="Agregar bibliografía"
                                                                            (click)="agregarBibliografiaBasica('',false);"
                                                                            fontIcon="add" style="color: white;
                                                                background-color: var(--primary);
                                                                border-radius: 32px;
                                                                margin-left: auto;"></mat-icon>
                                                                    </div>
                                                                </th>
                                                                <td mat-cell *matCellDef="let row; let index = index"
                                                                    style="padding: 5px 10px 0px 0px !important;text-align: center;vertical-align: middle;">
                                                                    <mat-form-field style="width: 100%;">
                                                                        <mat-label>Básica {{index+1}}</mat-label>
                                                                        <input matInput [formControlName]="index">


                                                                        <mat-icon matTooltip="Eliminar"
                                                                            fontIcon="delete" style="color: white;
                                                                                background-color: var(--primary);
                                                                                border-radius: 32px;
                                                                                height: 25px;
                                                                                width: 25px;
                                                                                padding: 0px;" *ngIf="index!=0"
                                                                            matSuffix
                                                                            (click)="eliminarBibliografiaBasica(index)"></mat-icon>

                                                                    </mat-form-field>
                                                                </td>
                                                            </ng-container>
                                                        </table>
                                                        <table mat-table style="border: 1px var(--primary) solid;"
                                                            [dataSource]="dataSourceFormBiblioCom"
                                                            formArrayName="complementarias">
                                                            <!-- Row definitions -->
                                                            <tr mat-header-row
                                                                *matHeaderRowDef="displayedColumnsBibliografiaComplementaria">
                                                            </tr>
                                                            <tr mat-row
                                                                *matRowDef="let row; let i = index; columns: displayedColumnsBibliografiaComplementaria;">
                                                            </tr>
                                                            <!-- Column definitions -->
                                                            <ng-container matColumnDef="complementarias">
                                                                <th mat-header-cell *matHeaderCellDef
                                                                    style="text-align: center;">
                                                                    <div style="display: flex;
                                                                    justify-content: center;">
                                                                        <h3 style="position: absolute;">Complementarias
                                                                        </h3> <mat-icon
                                                                            matTooltip="Agregar bibliografía"
                                                                            (click)="agregarBibliografiaComplementaria('',false);"
                                                                            fontIcon="add" style="color: white;
                                                            background-color: var(--primary);
                                                            border-radius: 32px;
                                                            margin-left: auto;"></mat-icon>
                                                                    </div>
                                                                </th>
                                                                <td mat-cell *matCellDef="let row; let index = index"
                                                                    style="padding: 5px 10px 0px 0px !important;text-align: center;vertical-align: middle;">
                                                                    <mat-form-field style="width: 100%;">
                                                                        <mat-label>Complementaria
                                                                            {{index+1}}</mat-label>
                                                                        <input matInput [formControlName]="index">
                                                                        <mat-icon matTooltip="Eliminar bibliografía"
                                                                            fontIcon="delete" style="color: white;
                                                                                background-color: var(--primary);
                                                                                border-radius: 32px;
                                                                                height: 25px;
                                                                                width: 25px;
                                                                                padding: 0px;" *ngIf="index!=0"
                                                                            matSuffix color="primary"
                                                                            (click)="eliminarBibliografiaComplementaria(index)">
                                                                        </mat-icon>
                                                                    </mat-form-field>
                                                                </td>
                                                            </ng-container>
                                                        </table>
                                                        <table mat-table style="border: 1px var(--primary) solid;"
                                                            [dataSource]="dataSourceFormBiblioPag"
                                                            formArrayName="paginasWeb">
                                                            <!-- Row definitions -->
                                                            <tr mat-header-row
                                                                *matHeaderRowDef="displayedColumnsBibliografiaPaginaWeb">
                                                            </tr>
                                                            <tr mat-row
                                                                *matRowDef="let row; let i = index; columns: displayedColumnsBibliografiaPaginaWeb;">
                                                            </tr>
                                                            <!-- Column definitions -->
                                                            <ng-container matColumnDef="paginasWeb">
                                                                <th mat-header-cell *matHeaderCellDef
                                                                    style="text-align: center;">
                                                                    <div style="display: flex;
                                                                    justify-content: center;">
                                                                        <h3 style="position: absolute;">Páginas web</h3>
                                                                        <mat-icon matTooltip="Agregar bibliografía"
                                                                            (click)="agregarBibliografiaPaginaWeb('',false);"
                                                                            fontIcon="add" style="color: white;
                                                            background-color: var(--primary);
                                                            border-radius: 32px;
                                                            margin-left: auto;"></mat-icon>
                                                                    </div>
                                                                </th>
                                                                <td mat-cell *matCellDef="let row; let index = index"
                                                                    style="padding: 5px 10px 0px 0px !important;text-align: center;vertical-align: middle;">
                                                                    <mat-form-field style="width: 100%;">
                                                                        <mat-label>Página web {{index+1}}</mat-label>
                                                                        <input matInput [formControlName]="index">

                                                                        <mat-icon matTooltip="Eliminar bibliografía"
                                                                            fontIcon="delete" style="color: white;
                                                                                background-color: var(--primary);
                                                                                border-radius: 32px;
                                                                                height: 25px;
                                                                                width: 25px;
                                                                                padding: 0px;" *ngIf="index!=0"
                                                                            matSuffix
                                                                            (click)="eliminarBibliografiaPaginaWeb(index)">
                                                                        </mat-icon>

                                                                    </mat-form-field>
                                                                </td>
                                                            </ng-container>
                                                        </table>
                                                    </div>
                                                    <!-- <button mat-button matStepperPrevious>Guardar</button> -->
                                                    <button mat-button matStepperPrevious mat-raised-button
                                                        style="background-color: var(--primary);color: white;">Anterior</button>
                                                </ng-template>
                                            </form>
                                        </mat-step>
                                    </mat-stepper>
                                    <mat-action-row style="height: 100%; width: 100%; display: flex;
                                        flex-direction: column;
                                        justify-content: flex-start;
                                        align-items: center;">
                                        <button mat-button style="background-color:var(--primary);color: white;"
                                            (click)="nextStep()">Continuar</button>
                                    </mat-action-row>
                                </div>

                            </mat-expansion-panel>

                            <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        Seguimiento y actualización del Syllabus
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <div class="container-border">
                                    <h4> Seguimiento y actualización del Syllabus </h4>
                                    <form [formGroup]="formSeguimiento">
                                        <div style="display: flex;
                                        flex-direction: column;
                                        gap: 5px;">
                                            <div style="    display: flex;
                                            flex-direction: row;
                                            width: 100%;border: 1px var(--primary) solid;">
                                                <div style="background-color: var(--primary);color: white;text-align: center; width: 50%;    display: flex;
                                                    justify-content: center;
                                                    align-items: center;">
                                                    <h3 style="margin: 0px;">Fecha de revisión por Consejo Curricular
                                                    </h3>
                                                </div>
                                                <div style="width: 50%;
                                                display: flex;
                                                justify-content: center;
                                                align-items: center;">
                                                    <mat-form-field style="width: 100%;">
                                                        <mat-label>{{!isNew?Syllabus.seguimiento.fechaRevisionConsejo.split('T')[0]:'Fecha
                                                            de revisión'}}</mat-label>
                                                        <input matInput [matDatepicker]="fechaRevisionConsejo"
                                                            formControlName="fechaRevisionConsejo">
                                                        <mat-datepicker-toggle matIconSuffix
                                                            [for]="fechaRevisionConsejo"></mat-datepicker-toggle>
                                                        <mat-datepicker #fechaRevisionConsejo></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                            <div style="display: flex; border: 1px var(--primary) solid;">
                                                <div style="background-color: var(--primary);color: white;text-align: center; width: 25%;  display: flex;
                                                    justify-content: center;
                                                    align-items: center;">
                                                    <h3 style="margin: 0px;">Fecha aprobación por
                                                        Consejo Curricular</h3>
                                                </div>
                                                <div
                                                    style="padding: 0px;text-align: center;vertical-align: middle;width: 25%;">
                                                    <mat-form-field style="width: 100%;">
                                                        <mat-label>{{!isNew?Syllabus.seguimiento.fechaAprobacionConsejo.split('T')[0]:'Fecha
                                                            aprobación'}}</mat-label>
                                                        <input matInput [matDatepicker]="fechaAprobacionConsejo"
                                                            formControlName="fechaAprobacionConsejo">
                                                        <mat-datepicker-toggle matIconSuffix
                                                            [for]="fechaAprobacionConsejo"></mat-datepicker-toggle>
                                                        <mat-datepicker #fechaAprobacionConsejo></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                                <div style="background-color: var(--primary);color: white;text-align: center;width: 25%;    display: flex;
                                                    justify-content: center;
                                                    align-items: center;">
                                                    <h3 style="margin: 0px;">Número de acta</h3>
                                                </div>
                                                <div
                                                    style="padding: 0px;text-align: center;vertical-align: middle;width: 25%; border-top: 1px var(--primary) solid;">
                                                    <mat-form-field style="width: 100%;">
                                                        <mat-label>{{!isNew?Syllabus.seguimiento.numeroActa:'Número de
                                                            acta'}}</mat-label>
                                                        <input matInput type="text" formControlName="numeroActa">
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                            <div style="border: 1px var(--primary) solid;display: flex;">
                                                <mat-form-field style="width: 100%;" (click)="f_input.click()">
                                                    <mat-label>Acta</mat-label>
                                                    <button mat-icon-button matPrefix>
                                                        <mat-icon>attach_file</mat-icon>
                                                    </button>
                                                    <input type="text" readonly matInput formControlName="archivo" />
                                                    <input type="file" hidden #f_input
                                                        (change)="handleFileInputActaChange($event)" />
                                                    <mat-error>Ingrese un archivo en formato pdf</mat-error>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                    </form>
                                    <mat-action-row style="height: 100%; width: 100%; display: flex;
                                        flex-direction: column;
                                        justify-content: flex-start;
                                        align-items: center;">
                                        <button mat-button style="background-color:var(--primary);color:white;"
                                            (click)="nextStep()" [disabled]="formSeguimiento.invalid">Continuar</button>
                                    </mat-action-row>
                                </div>

                            </mat-expansion-panel>

                            <mat-expansion-panel [expanded]="step === 3" (opened)="setStep(3)" hideToggle>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        Vigencia
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <div class="container-border">
                                    <h4> Vigencia </h4>
                                    <form [formGroup]="formVigencia">
                                        <div style="border: 1px var(--primary) solid;">
                                            <div style="display: flex;">
                                                <div style="background-color: var(--primary);color: white;text-align: center; width: 25%;display: flex;
                                                    justify-content: center;
                                                    align-items: center;">
                                                    Fecha inicio</div>
                                                <div
                                                    style="padding: 0px;text-align: center;vertical-align: middle;width: 25%;">
                                                    <mat-form-field style="width: 100%;">
                                                        <mat-label>{{!isNew?Syllabus.vigencia.fechaInicio.split('T')[0]:'Fecha
                                                            Inicio'}}</mat-label>
                                                        <input matInput [matDatepicker]="fechaInicio"
                                                            formControlName="fechaInicio">
                                                        <mat-datepicker-toggle matIconSuffix
                                                            [for]="fechaInicio"></mat-datepicker-toggle>
                                                        <mat-datepicker #fechaInicio></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                                <div style="background-color: var(--primary);color: white;text-align: center; width: 25%;display: flex;
                                                    justify-content: center;
                                                    align-items: center;">
                                                    Fecha fin</div>
                                                <div
                                                    style="padding: 0px;text-align: center;vertical-align: middle;width: 25%;">
                                                    <mat-form-field style="width: 100%;">
                                                        <mat-label>{{!isNew?Syllabus.vigencia.fechaFin.split('T')[0]:'Fecha
                                                            Fin'}}</mat-label>
                                                        <input matInput [matDatepicker]="fechaFin"
                                                            formControlName="fechaFin">
                                                        <mat-datepicker-toggle matIconSuffix
                                                            [for]="fechaFin"></mat-datepicker-toggle>
                                                        <mat-datepicker #fechaFin></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                            </mat-expansion-panel>
                        </mat-accordion>
                    </mat-card-content>
                </mat-card>

                <div style="height: 100%;
                width: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
                padding-top: 15px;
                gap: 10px;">
                    <button mat-raised-button style="background-color: var(--primary);color: white;"
                        (click)="regresar()">Regresar</button>
                    <button mat-raised-button style="background-color: var(--primary);color: white;"
                        (click)="SubmitSyllabus()" >Guardar</button>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</div>